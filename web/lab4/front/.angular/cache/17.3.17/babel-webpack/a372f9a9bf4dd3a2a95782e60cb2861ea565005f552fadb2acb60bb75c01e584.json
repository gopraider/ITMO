{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"primeng/button\";\nfunction MainComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction MainComponent_option_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const v_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", v_r2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(v_r2);\n  }\n}\nfunction MainComponent_tr_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const h_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(h_r3.x);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(h_r3.y);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(h_r3.r);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(h_r3.hit ? \"\\u0434\\u0430\" : \"\\u043D\\u0435\\u0442\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(h_r3.time);\n  }\n}\nexport let MainComponent = /*#__PURE__*/(() => {\n  class MainComponent {\n    constructor(http) {\n      this.http = http;\n      this.xValues = [-5, -4, -3, -2, -1, 0, 1, 2, 3];\n      this.x = 0;\n      this.y = null;\n      this.r = 1;\n      this.history = [];\n      this.error = '';\n    }\n    ngAfterViewInit() {\n      this.loadHistory();\n      setTimeout(() => this.drawArea(), 0);\n    }\n    loadHistory() {\n      this.http.get('http://localhost:8080/backend/api/hits').subscribe(res => this.history = res);\n    }\n    shoot() {\n      this.error = '';\n      if (this.y == null || isNaN(this.y)) {\n        this.error = 'Y должен быть числом от -3 до 3';\n        return;\n      }\n      if (this.y < -3 || this.y > 3) {\n        this.error = 'Y должен быть от -3 до 3';\n        return;\n      }\n      const body = {\n        x: this.x,\n        y: this.y,\n        r: this.r\n      };\n      this.http.post('http://localhost:8080/backend/api/hits', body).subscribe({\n        next: rec => {\n          this.history.unshift(rec);\n          this.drawArea();\n        },\n        error: () => this.error = 'Ошибка при отправке точки'\n      });\n    }\n    clear() {\n      this.http.delete('http://localhost:8080/backend/api/hits').subscribe(() => {\n        this.history = [];\n        this.drawArea();\n      });\n    }\n    logout() {\n      window.location.href = '/';\n    }\n    // ======== Графика (упрощённая) =========\n    drawArea() {\n      const c = document.getElementById('area');\n      if (!c) return;\n      const ctx = c.getContext('2d');\n      if (!ctx) return;\n      const W = c.width,\n        H = c.height,\n        cx = W / 2,\n        cy = H / 2;\n      const R = this.r > 0 ? this.r : 1;\n      const scale = W / 2 / (R * 1.25);\n      ctx.clearRect(0, 0, W, H);\n      ctx.strokeStyle = '#333';\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.moveTo(0, cy);\n      ctx.lineTo(W, cy);\n      ctx.moveTo(cx, 0);\n      ctx.lineTo(cx, H);\n      ctx.stroke();\n      ctx.font = '12px Arial';\n      ctx.fillStyle = '#333';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      const marks = [-R, -R / 2, R / 2, R];\n      marks.forEach(m => {\n        const px = cx + m * scale;\n        const py = cy - m * scale;\n        ctx.beginPath();\n        ctx.moveTo(px, cy - 5);\n        ctx.lineTo(px, cy + 5);\n        ctx.stroke();\n        ctx.fillText(m.toString(), px, cy + 15);\n        ctx.beginPath();\n        ctx.moveTo(cx - 5, py);\n        ctx.lineTo(cx + 5, py);\n        ctx.stroke();\n        if (m !== 0) {\n          ctx.fillText(m.toString(), cx - 15, py);\n        }\n      });\n      ctx.fillStyle = 'rgba(100,150,255,0.6)';\n      ctx.strokeStyle = '#0066cc';\n      ctx.beginPath();\n      ctx.rect(cx - R / 2 * scale, cy - R * scale, R / 2 * scale, R * scale);\n      ctx.fill();\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.moveTo(cx, cy);\n      ctx.lineTo(cx - R * scale, cy);\n      ctx.lineTo(cx, cy + R / 2 * scale);\n      ctx.closePath();\n      ctx.fill();\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.arc(cx, cy, R / 2 * scale, 0, Math.PI / 2, false);\n      ctx.lineTo(cx, cy);\n      ctx.closePath();\n      ctx.fill();\n      ctx.stroke();\n      // точки из history\n      this.history.forEach(h => {\n        const px = cx + h.x * scale;\n        const py = cy - h.y * scale;\n        ctx.beginPath();\n        ctx.arc(px, py, 4, 0, Math.PI * 2);\n        ctx.fillStyle = h.hit ? '#00aa00' : '#ff0000';\n        ctx.fill();\n        ctx.strokeStyle = '#333';\n        ctx.stroke();\n      });\n    }\n    static {\n      this.ɵfac = function MainComponent_Factory(t) {\n        return new (t || MainComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MainComponent,\n        selectors: [[\"app-main\"]],\n        decls: 63,\n        vars: 11,\n        consts: [[1, \"description\"], [1, \"info-container\"], [\"id\", \"Information\"], [\"id\", \"mainForm\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"controls-container\"], [1, \"control-group\"], [\"name\", \"x\", 3, \"ngModelChange\", \"ngModel\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"number\", \"name\", \"y\", \"step\", \"0.1\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"r\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [3, \"ngValue\"], [1, \"control-group\", \"button-group\"], [1, \"button-label\"], [1, \"buttons-container\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u0438\\u0442\\u044C\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"\\u0412\\u044B\\u0439\\u0442\\u0438\", 3, \"click\"], [\"id\", \"canvas\"], [\"id\", \"area\", \"width\", \"400\", \"height\", \"400\"], [1, \"results-section\"], [1, \"results-table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"error-message\"]],\n        template: function MainComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n            i0.ɵɵtext(3, \" \\u041A\\u0430\\u043B\\u0430\\u043A\\u0438\\u043D \\u042F\\u0440\\u043E\\u0441\\u043B\\u0430\\u0432 \\u0415\\u0432\\u0433\\u0435\\u043D\\u044C\\u0435\\u0432\\u0438\\u0447\");\n            i0.ɵɵelement(4, \"br\");\n            i0.ɵɵtext(5, \" P3209\");\n            i0.ɵɵelement(6, \"br\");\n            i0.ɵɵtext(7, \" \\u0418\\u0421\\u0423: 466084\");\n            i0.ɵɵelement(8, \"br\");\n            i0.ɵɵtext(9, \" \\u0412\\u0430\\u0440\\u0438\\u0430\\u043D\\u0442 666 \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(10, \"div\", 3)(11, \"h2\");\n            i0.ɵɵtext(12, \"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430 \\u043F\\u043E\\u043F\\u0430\\u0434\\u0430\\u043D\\u0438\\u044F \\u0442\\u043E\\u0447\\u043A\\u0438\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(13, MainComponent_div_13_Template, 2, 1, \"div\", 4);\n            i0.ɵɵelementStart(14, \"div\", 5)(15, \"div\", 6)(16, \"label\");\n            i0.ɵɵtext(17, \"\\u041A\\u043E\\u043E\\u0440\\u0434\\u0438\\u043D\\u0430\\u0442\\u0430 X:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"select\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function MainComponent_Template_select_ngModelChange_18_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.x, $event) || (ctx.x = $event);\n              return $event;\n            });\n            i0.ɵɵtemplate(19, MainComponent_option_19_Template, 2, 2, \"option\", 8);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(20, \"div\", 6)(21, \"label\");\n            i0.ɵɵtext(22, \"\\u041A\\u043E\\u043E\\u0440\\u0434\\u0438\\u043D\\u0430\\u0442\\u0430 Y:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"input\", 9);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function MainComponent_Template_input_ngModelChange_23_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.y, $event) || (ctx.y = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(24, \"div\", 6)(25, \"label\");\n            i0.ɵɵtext(26, \"\\u0420\\u0430\\u0434\\u0438\\u0443\\u0441 R:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"select\", 10);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function MainComponent_Template_select_ngModelChange_27_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.r, $event) || (ctx.r = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function MainComponent_Template_select_change_27_listener() {\n              return ctx.drawArea();\n            });\n            i0.ɵɵelementStart(28, \"option\", 11);\n            i0.ɵɵtext(29, \"1\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"option\", 11);\n            i0.ɵɵtext(31, \"1.5\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(32, \"option\", 11);\n            i0.ɵɵtext(33, \"2\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"option\", 11);\n            i0.ɵɵtext(35, \"2.5\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"option\", 11);\n            i0.ɵɵtext(37, \"3\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(38, \"div\", 12)(39, \"label\", 13);\n            i0.ɵɵtext(40, \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(41, \"div\", 14)(42, \"button\", 15);\n            i0.ɵɵlistener(\"click\", function MainComponent_Template_button_click_42_listener() {\n              return ctx.shoot();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(43, \"button\", 16);\n            i0.ɵɵlistener(\"click\", function MainComponent_Template_button_click_43_listener() {\n              return ctx.clear();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(44, \"button\", 17);\n            i0.ɵɵlistener(\"click\", function MainComponent_Template_button_click_44_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(45, \"div\", 18);\n            i0.ɵɵelement(46, \"canvas\", 19);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(47, \"div\", 20)(48, \"table\", 21)(49, \"thead\")(50, \"tr\")(51, \"th\");\n            i0.ɵɵtext(52, \"X\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(53, \"th\");\n            i0.ɵɵtext(54, \"Y\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(55, \"th\");\n            i0.ɵɵtext(56, \"R\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(57, \"th\");\n            i0.ɵɵtext(58, \"\\u041F\\u043E\\u043F\\u0430\\u0434\\u0430\\u043D\\u0438\\u0435\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(59, \"th\");\n            i0.ɵɵtext(60, \"\\u0412\\u0440\\u0435\\u043C\\u044F\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(61, \"tbody\");\n            i0.ɵɵtemplate(62, MainComponent_tr_62_Template, 11, 5, \"tr\", 22);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.x);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.xValues);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.y);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.r);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngValue\", 1);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngValue\", 1.5);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngValue\", 2);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngValue\", 2.5);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngValue\", 3);\n            i0.ɵɵadvance(26);\n            i0.ɵɵproperty(\"ngForOf\", ctx.history);\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel, i4.ButtonDirective]\n      });\n    }\n  }\n  return MainComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}